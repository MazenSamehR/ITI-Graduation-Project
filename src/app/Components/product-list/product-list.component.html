<app-navbar></app-navbar>
<div class="container-fluid">
  <div class="container py-5">
    <div class="mb-3">
      <div class="text-white">
        <h1>New and trending</h1>
        <p>Based on player counts and release date</p>
      </div>

      <!-- <div class="d-flex align-items-center gap-3">
        <button
          class="btn bg-dark btn-secondary border-0 dropdown-toggle"
          type="button"
          id="orderDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Order by: Relevance
        </button>
        <ul
          class="dropdown-menu dropdown-menu-dark bg-dark"
          aria-labelledby="orderDropdown"
        >
          <li><a class="dropdown-item" href="#">Relevance</a></li>
          <li><a class="dropdown-item" href="#">Release Date</a></li>
          <li><a class="dropdown-item" href="#">Player Count</a></li>
        </ul>

        <button
          class="btn btn-secondary bg-dark border-0 dropdown-toggle"
          type="button"
          id="platformDropdown"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Platforms
        </button>
        <ul
          class="dropdown-menu dropdown-menu-dark"
          aria-labelledby="platformDropdown"
        >
          <li><a class="dropdown-item" href="#">PC</a></li>
          <li><a class="dropdown-item" href="#">PlayStation</a></li>
          <li><a class="dropdown-item" href="#">Xbox</a></li>
          <li><a class="dropdown-item" href="#">Switch</a></li>
        </ul> -->

      <div class="ms-auto">
        <div class="d-flex align-items-center gap-3">
          <button
            class="btn bg-dark btn-secondary border-0 dropdown-toggle"
            type="button"
            id="orderDropdown"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Order by: {{ orderDisplayNames[selectedOrder] }}
          </button>
          <ul
            class="dropdown-menu dropdown-menu-dark bg-dark"
            aria-labelledby="orderDropdown"
          >
            <li>
              <button
                class="dropdown-item"
                (click)="onOrderChange('relevance')"
              >
                Relevance
              </button>
            </li>
            <li>
              <button
                class="dropdown-item"
                (click)="onOrderChange('release_date')"
              >
                Release Date
              </button>
            </li>
            <li>
              <button
                class="dropdown-item"
                (click)="onOrderChange('player_count')"
              >
                Player Count
              </button>
            </li>
          </ul>

          <button
            class="btn btn-secondary bg-dark border-0 dropdown-toggle"
            type="button"
            id="platformDropdown"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Platforms
          </button>
          <ul
            class="dropdown-menu dropdown-menu-dark"
            aria-labelledby="platformDropdown"
          >
          <li>
            <button class="dropdown-item" (click)="onPlatformChange('')">
              All
            </button>
          </li>
            <li>
              <button class="dropdown-item" (click)="onPlatformChange('PC')">
                PC
              </button>
            </li>
            <li>
              <button
                class="dropdown-item"
                (click)="onPlatformChange('PlayStation')"
              >
                PlayStation
              </button>
            </li>
            <li>
              <button class="dropdown-item" (click)="onPlatformChange('Xbox')">
                Xbox
              </button>
            </li>
            <li>
              <button
                class="dropdown-item"
                (click)="onPlatformChange('Switch')"
              >
                Switch
              </button>
            </li>
            <li>
              <button
                class="dropdown-item"
                (click)="onPlatformChange('IOS')"
              >
                IOS
              </button>
            </li>
            <li>
              <button
                class="dropdown-item"
                (click)="onPlatformChange('Linux')"
              >
              Linux
              </button>
            </li>
          </ul>
        </div>
      </div>

      <div class="row justify-content-center p-4">
        <!-- Product List -->
        <div
          *ngFor="let game of filteredGames"
          class="col-6 col-md-4 mb-4 d-flex"
        >
          <div
            style="
              border: 1px solid rgba(255, 255, 255, 0.189);
              background-color: #1c1c1c;
              cursor: pointer;
            "
            class="card text-white w-100 d-flex flex-column"
            [routerLink]="['/details/', game.id]"
          >
            <img
              [src]="game.background_image"
              style="height: 200px; object-fit: cover"
              class="card-img-top w-100 rounded-0"
              [alt]="game.name"
            />
            <div class="card-body justify-content-between flex-grow-1">
              <div>
                <div class="">
                  <div class="row justify-content-start rowPlatform">
                    @for (it of game.parent_platforms; track $index) {
                    @if(it.platform.name== 'PC') {
                    <div class="col-4 col-sm-1 m-1 platform">
                      <img [src]="PC" alt="" class="platformImg" />
                      <!-- <h4 class="hide">PC</h4> -->
                    </div>
                    }@else if (it.platform.name == 'PlayStation') {
                    <div class="col-4 col-sm-1 m-1 platform">
                      <img [src]="PlayStation" alt="" class="platformImg" />
                      <!-- <h4 class="hide">PlayStation</h4> -->
                    </div>
                    }@else if (it.platform.name == 'Linux') {
                    <div class="col-4 col-sm-1 m-1 platform">
                      <img [src]="Linux" alt="" class="platformImg" />
                      <!-- <h4 class="hide">Linux</h4> -->
                    </div>
                    }@else if (it.platform.name =='iOS') {
                    <div class="col-4 col-sm-1 m-1 platform">
                      <img [src]="IOS" alt="" class="platformImg" />
                      <!-- <h4 class="hide">ios</h4> -->
                    </div>
                    }@else if (it.platform.name == 'Nintendo') {
                    <div class="col-4 col-sm-1 m-1 platform">
                      <img [src]="Nintendo" alt="" class="platformImg" />
                      <!-- <h4 class="hide">Nintendo</h4> -->
                    </div>
                    }@else if(it.platform.name == 'Android') {
                    <div class="col-4 col-sm-1 m-1 platform">
                      <img [src]="Android" alt="" class="platformImg" />
                      <!-- <h4 class="hide">Android</h4> -->
                    </div>
                    }@else if (it.platform.name == 'Xbox'){
                    <div class="col-4 col-sm-1 m-1 platform">
                      <img [src]="Xbox" alt="" class="platformImg" />
                      <!-- <h4 class="hide">Xbox</h4> -->
                    </div>
                    } @else if(it.platform.name == 'Web'){
                    <div class="col-4 col-sm-1 m-1 platform">
                      <img [src]="Web" alt="" class="platformImg" />
                      <!-- <h4 class="hide">Web</h4> -->
                    </div>
                    }}
                  </div>
                  <h5 class="card-title my-4 fs-4">
                    {{ game.name | uppercase }}
                  </h5>
                  <p style="font-size: 1rem" class="card-text">
                    Release Date: {{ game.released | date : "longDate" }}
                  </p>
                </div>
              </div>
            </div>

            <!-- End of Product List -->
          </div>

          <!-- End of Product List -->
          <div *ngIf="filteredGames.length === 0" class="text-white">
            <h2>No Game found!</h2>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
